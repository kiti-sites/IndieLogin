<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>login</title>
</head>
<body>

<h2>login indie</h2>

<form id="loginForm">
  <input
    type="url"
    id="me"
    placeholder="https://seusite.com"
    required
  >
  <button type="submit">entrar</button>
</form>

<script>
document.getElementById("loginForm").onsubmit = e => {
  e.preventDefault()

  const me = document.getElementById("me").value

  const auth = new URL("https://indielogin.com/auth")
  auth.searchParams.set("client_id", "https://kiti-indielogin.netlify.app")
  auth.searchParams.set("redirect_uri", "https://kiti-indielogin.netlify.app/callback.html")
  auth.searchParams.set("response_type", "code")
  auth.searchParams.set("scope", "profile")
  auth.searchParams.set("me", me)
  auth.searchParams.set("state", crypto.randomUUID())

  window.location = auth.toString()
}
</script>

</body>
</html>
